<md-sidenav
  md-is-open="$root.sideNavOpen"
  class="md-sidenav-left sidenav"
  data-ng-class="{'md-red': isHeaderRed}"
  id="sidebar-left"
  md-component-id="left"
  layout="column"
  layout-align="space-between strech"
  >
  <!-- Portfolio Header and Chapters -->
  <md-toolbar class="sidenav__mobile-logo md-hue-1" layout="row" layout-align="center center">
    <div>
      <md-icon class="material-icons pointer sidenav__icon" data-ng-click="toggleSidenav('left')">arrow_backward
      </md-icon>
      <md-tooltip><span data-translate="HEADER_TOOLTIP_CLOSE_SIDENAV"></span></md-tooltip>
    </div>
    <div class="text-center" flex="grow">
      <a data-ng-href="/" class="logo logo-bw" id="logo-sidenav"></a>
      <md-tooltip><span data-translate="HEADER_TOOLTIP_GO_TO_LANDING_PAGE"></span></md-tooltip>
    </div>
  </md-toolbar>
  <md-divider></md-divider>
  <uib-accordion close-others="false">
    <!-- BEGIN My Pofile -->
    <div uib-accordion-group class="panel-default" is-open="$root.isUserTabOpen">
      <uib-accordion-heading>
        <a id="myProfile" class="sidenav__header sidenav__header--main" md-ink-ripple layout="row"
           layout-align="space-between center" data-ng-class="{'is-opened': $root.isUserTabOpen}"
           data-ng-click="updateUserCounts()">
          <div layout="row" layout-align="center center">
            <span data-translate="MY_PROFILE" class="sidenav__name"></span>
          </div>
          <md-icon class="material-icons sidenav__icon sidenav__icon--animate">keyboard_arrow_right</md-icon>
        </a>
      </uib-accordion-heading>
      <!-- Subitems -->
      <ul class="sidenav__list">
        <li class="sidenav__item" layout="column">
          <a id="myPortfolios" class="sidenav__header" md-ink-ripple layout="row" layout-align="space-between center"
             data-ng-class="{'is-active': $ctrl.$location.path() == '/' + user.username + '/portfolios'}"
             data-ng-click="checkUser($event, '/portfolios'); updateCount('userPortfolios')">
            <div layout="row" layout-align="center center">
              <md-icon class="material-icons sidenav__icon">book</md-icon>
              <span data-translate="MY_PORTFOLIOS" class="sidenav__name"></span>
            </div>
            <span
              class="sidenav__count"
              data-ng-if="$ctrl.authenticatedUserService.isAuthenticated()"
              data-ng-bind="userPortfoliosCount"
            ></span>
          </a>
        </li>
        <li class="sidenav__item" layout="column">
          <a id="myMaterials" class="sidenav__header" md-ink-ripple layout="row" layout-align="space-between center"
             data-ng-class="{'is-active': $ctrl.$location.path() == '/' + user.username + '/materials'}"
             data-ng-click="checkUser($event, '/materials'); updateCount('userMaterials')">
            <div layout="row" layout-align="center center">
              <md-icon class="material-icons sidenav__icon">description</md-icon>
              <span data-translate="MY_MATERIALS" class="sidenav__name"></span>
            </div>
            <span
              class="sidenav__count"
              data-ng-if="$ctrl.authenticatedUserService.isAuthenticated()"
              data-ng-bind="userMaterialsCount"
            ></span>
          </a>
        </li>
        <li class="sidenav__item" layout="column">
          <a id="myFavorites" class="sidenav__header" md-ink-ripple layout="row" layout-align="space-between center"
             data-ng-class="{'is-active': $ctrl.$location.path() == '/' + user.username + '/favorites'}"
             data-ng-click="checkUser($event, '/favorites'); updateCount('userFavorites')">
            <div layout="row" layout-align="center center">
              <md-icon class="material-icons sidenav__icon">star</md-icon>
              <span data-translate="MY_FAVORITES" class="sidenav__name"></span>
            </div>
            <span
              class="sidenav__count"
              data-ng-if="$ctrl.authenticatedUserService.isAuthenticated()"
              data-ng-bind="userFavoritesCount"
            ></span>
          </a>
        </li>
        <!-- BEGIN Dashboard -->
        <li class="sidenav__item" data-layout="column" data-ng-show="$ctrl.isAdminOrModerator()">
          <a
            id="dashboard"
            class="sidenav__header"
            data-ng-class="{'is-opened': dashboardOpen, 'is-active': dashboardOpen && $ctrl.$location.path() == '/dashboard'}"
            data-ng-click="dashboardSearch()"
            md-ink-ripple
            layout="row"
            layout-align="space-between center"
            >
            <div layout="row" layout-align="center center" data-ng-class="{'panel-open': dashboardOpen}">
              <md-icon class="material-icons sidenav__icon"></md-icon>
              <span data-translate="DASHBOARD" class="sidenav__name"></span>
            </div>
            <md-icon class="material-icons sidenav__icon sidenav__icon--animate">keyboard_arrow_right</md-icon>
          </a>
          <!-- Subitems -->
          <ul class="sidenav__list" data-ng-show="dashboardOpen">
            <li class="sidenav__item" layout="column">
              <a id="unReviewed" class="sidenav__header" md-ink-ripple layout="row"
                 layout-align="space-between center"
                 data-ng-class="{'is-active': $ctrl.$location.path() == '/dashboard/unReviewed'}"
                 data-ng-href="/dashboard/unReviewed" data-ng-click=updateCount('unReviewedLearningObject')>
                <div layout="row" layout-align="center center">
                  <md-icon class="material-icons sidenav__icon">lightbulb_outline</md-icon>
                  <span data-translate="UNREVIEWED" class="sidenav__name"></span>
                </div>
                <span class="sidenav__count" data-ng-bind="unReviewedLearningObjectsCount"></span>
              </a>
            </li>
            <li class="sidenav__item" layout="column">
              <a id="improperMaterials" class="sidenav__header" md-ink-ripple layout="row"
                 layout-align="space-between center"
                 data-ng-class="{'is-active': $ctrl.$location.path() == '/dashboard/improperMaterials'}"
                 data-ng-href="/dashboard/improperMaterials" data-ng-click="updateCount('improperMaterials')">
                <div layout="row" layout-align="center center">
                  <md-icon class="material-icons sidenav__icon">warning</md-icon>
                  <span data-translate="IMPROPER_MATERIALS" class="sidenav__name"></span>
                </div>
                <span class="sidenav__count" data-ng-bind="improperMaterialsCount"></span>
              </a>
            </li>
            <li class="sidenav__item" layout="column" ng-if="$ctrl.isAdminOrModerator()">
              <a id="improperPortfolios" class="sidenav__header" md-ink-ripple layout="row"
                 layout-align="space-between center"
                 data-ng-class="{'is-active': $ctrl.$location.path() == '/dashboard/improperPortfolios'}"
                 data-ng-href="/dashboard/improperPortfolios" data-ng-click="updateCount('improperPortfolios')">
                <div layout="row" layout-align="center center">
                  <md-icon class="material-icons sidenav__icon">warning</md-icon>
                  <span data-translate="IMPROPER_PORTFOLIOS" class="sidenav__name"></span>
                </div>
                <span class="sidenav__count" data-ng-bind="improperPortfoliosCount"></span>
              </a>
            </li>
            <li class="sidenav__item" layout="column" ng-if="$ctrl.isAdminOrModerator()">
              <a id="brokenMaterials" class="sidenav__header" md-ink-ripple layout="row"
                 layout-align="space-between center"
                 data-ng-class="{'is-active': $ctrl.$location.path() == '/dashboard/brokenMaterials'}"
                 data-ng-href="/dashboard/brokenMaterials" data-ng-click="updateCount('brokenMaterials')">
                <div layout="row" layout-align="center center">
                  <md-icon class="material-icons sidenav__icon">content_cut</md-icon>
                  <span data-translate="BROKEN_MATERIALS" class="sidenav__name"></span>
                </div>
                <span class="sidenav__count" data-ng-bind="brokenMaterialsCount"></span>
              </a>
            </li>
            <li class="sidenav__item" layout="column" ng-if="$ctrl.authenticatedUserService.isAdmin()">
              <a id="changedLearningObjects" class="sidenav__header" md-ink-ripple layout="row"
                 layout-align="space-between center"
                 data-ng-class="{'is-active': $ctrl.$location.path() == '/dashboard/changedLearningObjects'}"
                 data-ng-href="/dashboard/changedLearningObjects" data-ng-click="updateCount('changedLearningObjects')">
                <div layout="row" layout-align="center center">
                  <md-icon class="material-icons sidenav__icon">priority_high</md-icon>
                  <span data-translate="DASHBOARD_CHANGED_LEARNING_OBJECTS" class="sidenav__name"></span>
                </div>
                <span class="sidenav__count" data-ng-bind="changedLearningObjectCount"></span>
              </a>
            </li>
            <li class="sidenav__item" layout="column" ng-if="$ctrl.isAdminOrModerator()">
              <a id="deletedMaterials" class="sidenav__header" md-ink-ripple layout="row"
                 layout-align="space-between center"
                 data-ng-class="{'is-active': $ctrl.$location.path() == '/dashboard/deletedMaterials'}"
                 data-ng-href="/dashboard/deletedMaterials" data-ng-click="updateCount('deletedMaterials')">
                <div layout="row" layout-align="center center">
                  <md-icon class="material-icons sidenav__icon">delete</md-icon>
                  <span data-translate="DELETED_MATERIALS" class="sidenav__name"></span>
                </div>
                <span class="sidenav__count" data-ng-bind="deletedMaterialsCount"></span>
              </a>
            </li>
            <li class="sidenav__item" layout="column" ng-if="$ctrl.isAdminOrModerator()">
              <a id="deletedPortfolios" class="sidenav__header" md-ink-ripple layout="row"
                 layout-align="space-between center"
                 data-ng-class="{'is-active': $ctrl.$location.path() == '/dashboard/deletedPortfolios'}"
                 data-ng-href="/dashboard/deletedPortfolios" data-ng-click="updateCount('deletedPortfolios')">
                <div layout="row" layout-align="center center">
                  <md-icon class="material-icons sidenav__icon">delete</md-icon>
                  <span data-translate="DELETED_PORTFOLIOS" class="sidenav__name"></span>
                </div>
                <span class="sidenav__count" data-ng-bind="deletedPortfoliosCount"></span>
              </a>
            </li>
            <li class="sidenav__item" layout="column" ng-if="$ctrl.authenticatedUserService.isAdmin()">
              <a id="moderators" class="sidenav__header" md-ink-ripple layout="row" layout-align="space-between center"
                 data-ng-class="{'is-active': $ctrl.$location.path() == '/dashboard/moderators'}" data-ng-href="/dashboard/moderators"
                 data-ng-click="updateCount('moderators')">
                <div layout="row" layout-align="center center">
                  <md-icon class="material-icons sidenav__icon">people</md-icon>
                  <span data-translate="MODERATORS_TAB" class="sidenav__name"></span>
                </div>
                <span class="sidenav__count" data-ng-bind="moderatorsCount"></span>
              </a>
            </li>
            <li class="sidenav__item" layout="column" ng-if="$ctrl.authenticatedUserService.isAdmin()">
              <a id="restrictedUsers" class="sidenav__header" md-ink-ripple layout="row"
                 layout-align="space-between center"
                 data-ng-class="{'is-active': $ctrl.$location.path() == '/dashboard/restrictedUsers'}"
                 data-ng-href="/dashboard/restrictedUsers" data-ng-click="updateCount('restrictedUsers')">
                <div layout="row" layout-align="center center">
                  <md-icon class="material-icons sidenav__icon">lock</md-icon>
                  <span data-translate="RESTRICTED_USERS_TAB" class="sidenav__name"></span>
                </div>
                <span class="sidenav__count" data-ng-bind="restrictedUsersCount"></span>
              </a>
            </li>
          </ul>
        </li>
        <!-- END Dashboard -->
      </ul>
    </div>
    <!-- END My Pofile -->
    <div
      uib-accordion-group class="panel-default"
      data-ng-if="isViewPortforlioPage || isEditPortfolioMode"
      is-open="$root.isViewPortfolioAndEdit"
      >
      <dop-table-of-contents data-portfolio="portfolio"></dop-table-of-contents>
    </div>
    <div
      uib-accordion-group
      class="panel-default"
      is-open="isTaxonomyOpen"
      data-ng-if="!isViewPortforlioPage && !isEditPortfolioMode"
      >
      <uib-accordion-heading>
        <a
          id="sidenavHeader"
          class="sidenav__header sidenav__header--main"
          md-ink-ripple
          layout="row"
          layout-align="space-between center"
          data-ng-class="{'is-opened': isTaxonomyOpen}"
          data-ng-click="changeTaxonomyDataAndVisibility('sidebar', 'primary')"
          >
          <div layout="row" layout-align="center center">
            <span data-translate="TABLE_OF_CONTENTS" class="sidenav__name"></span>
          </div>
          <md-icon class="material-icons sidenav__icon sidenav__icon--animate">keyboard_arrow_right</md-icon>
        </a>
      </uib-accordion-heading>
      <!-- Taxon subitems -->
      <ul class="sidenav__list">
        <li data-ng-repeat="(key, item) in taxon">
          <div class="sidenav__item" layout="column" icon="taxonIcons[key]" dop-sidenav-taxon data-taxon="item"></div>
        </li>
      </ul>
    </div>
  </uib-accordion>
  <span class="flex"></span>
  <md-divider hide-xs hide-sm hide-md></md-divider>
  <div>
    <div class="sidenav__item" layout="column" hide-xs hide-sm hide-md>
      <a class="sidenav__header sidenav__header--version-number" md-ink-ripple layout="row" layout-align="start center"
         target="_blank" href="https://github.com/e-koolikott/DOP/blob/master/CHANGELOG.md">
        <span class="material-icons icon-github-circled"></span>
        <div class="sidenav__name"><span data-translate="APP_VERSION"></span> <span ng-bind="APP_VERSION"></span></div>
      </a>
    </div>
  </div>
</md-sidenav>
